================================================================================
                ПОЛНАЯ ДОКУМЕНТАЦИЯ ПРОЕКТА: FORTISWEB CRM
================================================================================

1. СТРУКТУРА ПРОЕКТА
--------------------------------------------------------------------------------
Проект представляет собой современную CRM-систему (FortisWeb CRM), разработанную 
на стеке React + Vite + Tailwind CSS.

ОСНОВНЫЕ ДИРЕКТОРИИ:
- /src/api: Определение клиентских API-запросов (Axios), разбитых по модулям.
- /src/store: Управление состоянием приложения (Zustand stores).
- /src/pages: Основные страницы приложения (Dashboard, Orders, Tasks и т.д.).
- /src/components: Многоразовые UI-компоненты.
- /src/layouts: Шаблоны страниц (например, DashboardLayout с сайдбаром).
- /src/locales: Файлы локализации (en.json, ru.json, uz.json).
- /src/utils: Вспомогательные функции и утилиты.
- /public: Статические ассеты (логотипы, иконки).

ГЛАВНЫЕ ФАЙЛЫ:
- index.html: Точка входа в браузере.
- src/main.jsx: Инициализация React и рендеринг App.
- src/App.jsx: Основной компонент с роутингом и глобальной логикой.
- src/i18n.js: Конфигурация интернационализации.
- vite.config.js: Настройки сборщика Vite.
- tailwind.config.js: Конфигурация стилей Tailwind CSS.


2. API И МАРШРУТЫ (ЭНДПОИНТЫ)
--------------------------------------------------------------------------------
Базовый URL: http://localhost:5000/api
Аутентификация: Bearer Token (хранится в Cookies).

ОСНОВНЫЕ МОДУЛИ API:

[AUTHENTICATION]
- POST /api/auth/register    : Регистрация нового пользователя.
- POST /api/auth/login       : Вход в систему (возвращает JWT).
- GET  /api/auth/me          : Получение данных текущего пользователя.
- PUT  /api/auth/profile     : Обновление профиля.

[PROJECTS]
- GET  /api/projects         : Получить все проекты (Admin).
- POST /api/projects         : Создать новый проект.
- GET  /api/projects/:id     : Детали проекта.
- PUT  /api/projects/:id     : Обновить проект (вкл. репозиторий).
- DELETE /api/projects/:id   : Удалить проект.
- PUT  /api/projects/:id/assign : Назначить команду/тимлида.
- PUT  /api/projects/:id/complete : Завершить проект.

[TASKS]
- GET  /api/tasks            : Все задачи.
- POST /api/tasks            : Создать задачу.
- PUT  /api/tasks/:id/status : Смена статуса (todo, in_progress, review, completed).
- GET  /api/tasks/project/:id : Задачи конкретного проекта.

[COMPANIES]
- GET  /api/companies        : Список всех компаний (SuperAdmin).
- POST /api/companies        : Регистрация компании.
- POST /api/companies/:id/teams : Добавить команду в компанию.

[PAYMENTS]
- GET  /api/payments/company/:id : Платежи компании.
- PUT  /api/payments/:id/confirm : Подтверждение получения оплаты.
- PUT  /api/payments/:id/complete : Завершение платежа и распределение зарплат.


3. БАЗА ДАННЫХ (МОДЕЛИ)
--------------------------------------------------------------------------------
Используется MongoDB (Mongoose на бэкенде).

ОСНОВНЫЕ КОЛЛЕКЦИИ И ПОЛЯ:

[USER]
- name (String): Полное имя.
- email (String): Уникальный адрес.
- password (String): Хеш пароля.
- role (String): super_admin, company_admin, team_lead, performer.
- company (Ref): Ссылка на компанию.
- team (Ref): Ссылка на команду.
- isOnline (Boolean): Статус в сети.

[COMPANY]
- name (String): Название.
- domain (String): URL сайта.
- distributionRates (Object): Проценты распределения выручки.
- teams (Array): Список команд внутри компании.

[PROJECT / ORDER]
- title (String): Название.
- description (String): Описание.
- budget (Number): Сумма договора.
- status (String): assigned, in_progress, completed, cancelled.
- repositoryUrl (String): Ссылка на код.
- assignedTeam (Ref): Команда.
- assignedMembers (Array): Список исполнителей.

[TASK]
- title (String): Заголовок.
- status (String): Текущее состояние.
- weight (Number): Сложность задачи (1-10) для расчета зарплаты.
- deadline (Date): Срок выполнения.
- assignedTo (Ref): Исполнитель.


4. ФУНКЦИИ И КОМПОНЕНТЫ
--------------------------------------------------------------------------------
ЛОГИКА СОСТОЯНИЯ (ZUSTAND STORES):
- auth.store.js: Управление сессией, логин/выход, текущий пользователь.
- project.store.js: CRUD операций для проектов, смена статусов, фильтрация.
- task.store.js: Управление задачами, включая Kanban-доску.
- payment.store.js: Финансовая логика, расчет долей участников.

КЛЮЧЕВЫЕ КОМПОНЕНТЫ:
- DashboardLayout: Обертка с Sidebar (навигация) и Header (профиль, язык).
- Orders.jsx: Списки заказов, создание проектов, загрузка ТЗ.
- Tasks.jsx: Kanban-доска с Drag & Drop для перемещения задач.
- Projects.jsx: Карточки проектов с управлением репозиториями.
- Chat.jsx: Интерфейс внутреннего мессенджера.


5. КОНФИГУРАЦИЯ
--------------------------------------------------------------------------------
ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ (.env):
- NEXT_PUBLIC_API_URL: Адрес API бэкенда (например, http://localhost:5000/api).

КЛЮЧЕВЫЕ ЗАВИСИМОСТИ:
- react & react-dom: Основа интерфейса.
- axios: HTTP-клиент с интерцепторами для передачи токенов.
- zustand: Легкое управление состоянием (State Management).
- react-router-dom: Навигация между страницами.
- i1next: Мультиязычность.
- tailwindcss: Стилизация компонентов.
- plotly.js: Отрисовка графиков и статистики.


6. КАК РАБОТАЕТ (ЛОГИКА)
--------------------------------------------------------------------------------
АУТЕНТИФИКАЦИЯ:
Пользователь логинится через AuthService, получает JWT, который записывается в 
Cookies. Axios интерцептор автоматически добавляет заголовок Authorization 
к каждому запросу.

ОБРАБОТКА ЗАПРОСОВ:
1. Компонент вызывает метод из Store (например, `createTask`).
2. Store выполняет запрос через соответствующий API файл.
3. При успехе Store обновляет локальное состояние, и React перерисовывает UI.

ИНТЕГРАЦИИ:
- Telegram Bot: Прием заказов из внешнего бота (эндпоинты в Orders).
- File Storage: Загрузка документов (ТЗ) и файлов проектов через эндпоинты Uploads.


7. КАК ЗАПУСТИТЬ
--------------------------------------------------------------------------------
ТРЕБОВАНИЯ: Node.js (версия 18+), npm или yarn.

УСТАНОВКА:
```bash
npm install
```

ЗАПУСК В РЕЖИМЕ РАЗРАБОТКИ:
```bash
npm run dev
```

СБОРКА ДЛЯ ПРОДАКШЕНА:
```bash
npm run build
```

НАСТРОЙКА ОКРУЖЕНИЯ:
Создайте файл `.env` в корне и укажите `NEXT_PUBLIC_API_URL`.

================================================================================
                        КОНЕЦ ДОКУМЕНТАЦИИ
================================================================================
